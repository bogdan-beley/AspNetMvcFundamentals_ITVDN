@model L09_HomeWorkB1_2.Models.OrdersListVIewModel

@{
    ViewBag.Title = "Orders";

    var options = new AjaxOptions()
    {
        UpdateTargetId = "orderstable",
        Url = Url.Action("OrdersData"),
    };
}

<h2>Orders</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
@using (Ajax.BeginForm(options))
{
    <div class="form-inline">
        <div class="form-group mb-2">
            @Html.LabelFor(model => model.Customers, htmlAttributes: new { @class = "form-label mr-sm-2" })
            @Html.DropDownList("customer", Model.Customers as SelectList, htmlAttributes: new { @class = "form-control mr-sm-2" })
        </div>
        <div class="form-group mb-2">
            @Html.LabelFor(model => model.Products, htmlAttributes: new { @class = "form-label mr-sm-2" })
            @Html.DropDownList("product", Model.Products as SelectList, htmlAttributes: new { @class = "form-control mr-sm-2" })
        </div>
        <div class="form-group mb-2">
            <button type="submit" class="btn btn-outline-success mr-sm-2">Фільтрувати</button>
        </div>
    </div>
    <table class="table">
        <thead>
            <tr>
                <th>
                    ID
                </th>
                <th>
                    Продукт
                </th>
                <th>
                    Сума
                </th>
                <th>
                    Покупець
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody id="orderstable">
            @Html.Action("OrdersData")
        </tbody>
    </table>       
}

@section scripts {
    <script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
}

























@*
    <table class="table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Customer.Name)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Sum)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Product)
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Customer.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Sum)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Product)
                </td>
                <td>
                    @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                    @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                    @Html.ActionLink("Delete", "Delete", new { id = item.Id })
                </td>
            </tr>
        }

    </table>
*@
